---
name: ib-research
description: >
  암호화폐·기업 등 모든 투자 대상에 대해 BlackRock/글로벌 IB 수준의 투자 분석 리포트를 생성합니다.
  보편 질문(Q1·Q2) + 대상 특화 서브 질문의 혼합 구조로 동적 검증 트리를 생성합니다.
  "풀스택으로", "IB 리포트", "투자 분석", "분석해줘" 같은 요청에 자동 활성화됩니다.
---

# IB Research Skill v4
# [변경 이력]
# v1: 초기 버전 (LINK 전용, 정적 섹션 구조)
# v2: 2026-02-22 — 분석 대상 일반화, 이중 태그 체계, Q1·Q2 집계 규칙
# v3: 2026-02-22 — 검증 트리 기반 혼합 구조, 동적 서브 질문, 모듈화 설계
# v4: 2026-02-22 — IB 7섹션 구조 적용, Snapshot+Variant View, Catalyst 분리, TOKEN 2.0

---

## 리서치 목적 선언

> 시장이 아직 제대로 구조화하지 못한 불확실성을, 내 철학에 맞는 구조로 번역해서,
> 남보다 더 좋은 리스크 조정 수익 결정을 반복하기 위해서.

이 스킬은 단순 정리·요약이 아니라 **항상 이 목적을 향해 사고를 꺾는다.**
모든 섹션은 결론 문장으로 끝나야 한다. 사실 나열로 끝나는 섹션은 미완성이다.

---

## 트리거 패턴

다음 요청 중 하나가 들어오면 이 스킬을 활성화한다:

- "[대상] 풀스택으로 분석해줘"
- "[대상] IB 리포트 써줘"
- "[대상] 투자 분석해줘"
- "[대상] BlackRock 스타일로 분석해줘"
- "검증해줘" / "크로스체크해줘" → 검증 모드
- "[대상] 빠르게 분석해줘" → 빠르게 모드

---

## 분석 모드

| 명령어 | Step 0 실행 | MCP | Notion |
|---|---|---|---|
| `풀스택으로` | 서브 질문 제안 → 선택 후 진행 | 전체 7단계 | 저장 |
| `빠르게` | 생략 (보편 구조 즉시 실행) | 없음 | 없음 |
| `검증해줘` | 생략 (기존 분석 대상) | 선택적 | 없음 |
| `섹션만` | 생략 (지정 섹션만 생성) | 섹션별 | 없음 |

---

## Step 0: 질문 구조화 (풀스택 모드 전용)

### 목적
분석 시작 전, 보편 질문(Q1·Q2)에 대상 특화 서브 질문을 결합하여
이번 분석의 검증 트리 구조를 확정한다.

### 실행 조건
- 사용자가 서브 질문을 직접 입력한 경우 → 즉시 분석 진행 (Step 0 생략)
- 서브 질문이 없는 경우 → 아래 절차 실행

### Step 0 절차

**[1] 대상 분류**

대상을 아래 유형 중 하나로 분류한다:

| 유형 | 예시 | 핵심 쟁점 경향 |
|---|---|---|
| L1 블록체인 | ETH, SOL, BTC | 수수료 구조, 생태계 네트워크 효과, 검증자 경제 |
| 인프라 토큰 | LINK, PYTH, ENA | B2B 수익 구조, 프로토콜 의존도, 경쟁 대체 가능성 |
| DePIN | RENDER, AKT | 실물 자원 수요, 토큰 인플레이션, Web2 대비 경쟁력 |
| 거버넌스/DeFi | UNI, AAVE, MKR | 프로토콜 수익의 토큰 귀속, TVL 방어력 |
| 전통 기업 | 삼성, NVDA, TSMC | 사이클 위치, 해자 강도, 자본 배분 효율 |
| 기타 | — | 아래 서브 질문 후보를 공백으로 두고 사용자 입력 요청 |

**[2] 서브 질문 후보 제안**

대상 유형을 확인한 후, Q1·Q2 각각에 대해 서브 질문 후보 2~3개를 제안한다.

출력 형식:
```
[대상] 분석을 시작하기 전, 이번 분석에서 집중할 핵심 쟁점을 확인합니다.

Q1 (지속 가능 수익) 관련 — 하나를 선택하거나 직접 입력:
  (a) [대상 특화 서브 질문 A]
  (b) [대상 특화 서브 질문 B]
  (c) 직접 입력

Q2 (대체 불가능한 해자) 관련 — 하나를 선택하거나 직접 입력:
  (d) [대상 특화 서브 질문 C]
  (e) [대상 특화 서브 질문 D]
  (f) 직접 입력

→ 선택지 번호 또는 직접 입력. 생략하면 보편 구조로 진행합니다.
```

**[3] 검증 트리 확정**

사용자 선택을 받은 후, 이번 분석의 검증 트리를 확정하고 출력한다:

```
=== 검증 트리 확정 ===

Q1: "지속 가능하게 돈을 버는가?"
  └── Q1-a: [선택된 서브 질문]
      병목 섹션: [Section X] — 이유: [왜 이 섹션이 결정적인가]
      필수 데이터: [MCP/소스]

Q2: "대체 불가능한 해자는 무엇인가?"
  └── Q2-a: [선택된 서브 질문]
      병목 섹션: [Section X]
      필수 데이터: [MCP/소스]

생성될 섹션: [필수 섹션 목록] + [서브 질문에 의해 추가된 섹션]
생략될 섹션: [이번 질문과 무관한 섹션] — 이유: [근거]

→ 분석을 시작합니다.
===================
```

---

## 보편 질문 (고정)

**Q1.** "[대상]은 없어지지 않고, 구조적으로 지속 가능한 방식으로 나에게 돈을 벌어줄 수 있는가?"

**Q2.** "[대상]은 경쟁자 대비 대체 불가능한 해자가 무엇인가?"

→ 모든 분석은 이 두 질문에 대한 증거를 쌓는 방식으로 진행된다.
→ 서브 질문은 이 두 질문을 대상에 맞게 날카롭게 만드는 역할이다. 대체하는 것이 아니다.
→ Section 8 결론에서 Q1·Q2와 서브 질문 모두에 조건부로 명시 답변한다.

---

## 검증 트리 구조

분석은 선형 섹션 나열이 아니라 검증 트리의 노드를 순서대로 통과하는 방식으로 진행된다.

```
[루트] Q1·Q2 + 서브 질문 확정
    │
    ├── [노드 A] 대상 분류 → 유형별 기본 모듈 선택
    │
    ├── [노드 B] 비즈니스·수익 구조 파악 (Module: BIZ)
    │       ↓ 출력: 수익 구조 복잡도, 고객 전환 비용
    │
    ├── [노드 C] 수익 지속 가능성 검증 (Module: EARN) ← Q1 병목
    │       ├── ✅ 3조건 충족 → 노드 D로
    │       ├── ⚠️ 일부 충족 → 조건부 태그 부여 후 노드 D로
    │       └── ❌ 2개 이상 미충족 → "수익 논거 미성립" 명시, 노드 D 생략 가능
    │
    ├── [노드 D] 토큰/자본 수급 분석 (Module: SUPPLY)
    │       ↓ 출력: Free Float, 언락 압력, 인플레이션율
    │
    ├── [노드 E] 경쟁 해자 검증 (Module: MOAT) ← Q2 병목
    │       ├── High 해자 2개 이상 → 멀티플 프리미엄 정당화
    │       ├── High 해자 1개 → 조건부 해자
    │       └── High 해자 0개 → "해자 불재" 명시, 밸류에이션 멀티플 하향
    │
    ├── [노드 F] 밸류에이션 (Module: VAL)
    │       ↓ 입력: 노드 C 수익 추정 + 노드 D Free Float + 노드 E 멀티플 근거
    │
    ├── [노드 G] 리스크·시나리오 (Module: RISK)
    │       ↓ 입력: 노드 E 해자 붕괴 조건 + 노드 F Bear 가격 경로
    │
    └── [노드 H] 포트폴리오·결론 (Module: PORT)
            ↓ Q1·Q2 + 서브 질문 최종 집계 답변
```

### 노드 분기 규칙

| 조건 | 분기 결과 |
|---|---|
| 노드 C: ❌ 2개 이상 | 노드 D 생략 가능, 노드 F는 Bear 시나리오만 생성 |
| 노드 E: High 해자 0개 | 노드 F 멀티플을 동종 하단으로 설정 |
| 서브 질문이 규제 관련 | 노드 G 앞에 Module: REG 삽입 |
| 서브 질문이 거시 관련 | 노드 B 앞에 Module: MACRO 삽입 |
| 대상이 전통 기업 | Module: SUPPLY → Module: CAPALLOC으로 교체 |

### 모듈 목록 (SECTIONS.md v4에서 각 모듈 상세 스펙 정의)

| 모듈 ID | 노드 | 섹션 | 항상 생성 | Q1/Q2 |
|---|---|---|---|---|
| SNAP | 출력 | 0. Snapshot & Variant View | Yes | 집계 출력 |
| MKT | 노드 A | 1. Market & Competitive Landscape | Yes | **Q2 병목** |
| BIZ | 노드 B | 2. Business / Protocol Model | Yes | Q2 보조 |
| FIN | 노드 C | 3. Financials & KPIs / Onchain Metrics | Yes | **Q1 병목** |
| TOKEN | 노드 D | 4a. Tokenomics 2.0 | 크립토만 | Q1 보조 |
| CAPALLOC | 노드 D | 4b. Capital Allocation | 기업만 | Q1 보조 |
| VAL | 노드 F | 5. Valuation & Scenario | Yes | Q1 보조 |
| RISK | 노드 G | 6. Key Risks & Mitigants | Yes | Q1·Q2 보조 |
| REC | 노드 H | 7. Recommendation & Catalysts | Yes | 최종 집계 |
| MACRO | 선택 | [선택] Macro Context | 선택 | 맥락 |
| REG | 선택 | [선택] Regulatory Deep Dive | 선택 | 리스크 |

---

## 작성 순서 vs 출력 순서

```
실제 작성 순서 (검증 트리 노드):
  Step 0 → MKT(1) → BIZ(2) → FIN(3) → TOKEN/CAPALLOC(4) → VAL(5) → RISK(6) → REC(7) → SNAP(0)

출력 표시 순서 (독자가 읽는 순서):
  SNAP(0) → MACRO(선택) → MKT(1) → BIZ(2) → FIN(3) → TOKEN/CAPALLOC(4) → VAL(5) → REG(선택) → RISK(6) → REC(7) → Appendix
```

SNAP(Section 0)은 반드시 마지막에 작성한다.

---

## Q1·Q2 최종 판단 집계 규칙

Layer 2 태그(🄰🄴🅄●)는 개별 섹션의 결론 확신도인 동시에
Q1·Q2 최종 판단의 누적 증거로 기능한다.

### Q1 집계

| 기여 섹션 | 기여 항목 | 역할 |
|---|---|---|
| Section 3 / Module FIN | 수익 3조건 | **병목** — 이 섹션이 🅄이면 Q1 = 🅄 |
| Section 4 / Module TOKEN·CAPALLOC | 수급·자본 배분 | 보조 |
| Section 5 / Module VAL | 현재가 적정성 | 보조 |

집계: Q1 = 기여 섹션 중 최저 태그 (단, FIN이 🅄이면 무조건 🅄)

### Q2 집계

| 기여 섹션 | 기여 항목 | 역할 |
|---|---|---|
| Section 1 / Module MKT | 시장 포지션·경쟁 해자 | **병목** — 이 섹션이 🅄이면 Q2 = 🅄 |
| Section 2 / Module BIZ | 전환 비용·수익 구조 | 보조 |

집계: Q2 = MKT 섹션 태그 (사실상 단독 병목)

### 서브 질문 집계

서브 질문은 해당 병목 섹션의 태그를 그대로 상속한다.
서브 질문이 별도 모듈(REG, MACRO)을 추가한 경우, 그 섹션 태그가 Q1 또는 Q2 집계에 포함된다.

### Section 7 최종 출력 형식

```
Q1: [조건부 Yes/No] — [집계 태그] | 병목: Section 3 ([태그])
  Q1-a: [서브 질문 답변] — [태그]

Q2: [해자 정의] — [집계 태그] | 병목: Section 1 ([태그])
  Q2-a: [서브 질문 답변] — [태그]
```

금지 패턴:
- 병목 섹션이 🅄인데 Q1/Q2를 🄰로 결론 내리는 것
- 서브 질문 답변 없이 Q1·Q2만 답하는 것
- 조건 없이 "Yes"로 단정하는 것

---

## 신뢰도 태그 이중 체계

### Layer 1 — 소스 품질 (데이터 수치에 부착)

| 태그 | 의미 | 취득 방법 |
|---|---|---|
| 🟢 | 공식·직접 취득 | MCP API / 온체인 직접 / 공시 / 공식 발표 |
| 🟡 | 간접·추정 | 1차 보도 / 리서치 기관 / 웹서치 교차 확인 완료 |
| 🔴 | 미교차·단일 | 단일 소스 / 2차 인용 / 검증 필요 |
| ⚫ | 불명·가정 | 출처 불명 / 가정값 |

### Layer 2 — 결론 확신도 (결론 문장에 부착)

| 태그 | 의미 | 사용 조건 |
|---|---|---|
| 🄰 | 높은 확신 | 🟢 소스 2개 이상 수렴 + 반증 검토 완료 |
| 🄴 | 조건부 확신 | 🟡 소스 또는 단일 🟢 + 가정 명시 |
| 🅄 | 낮은 확신 | 🔴 소스 의존 또는 데이터 공백 |
| ● | 판단 보류 | 상충 데이터 존재 / 추가 조사 필요 |

금지 조합: 🔴 데이터 + 🄰 결론

### Layer 3 — 섹션 헤더 주석

각 섹션 제목 아래에 작성 방식을 한 줄 주석으로 표기한다:
```
<!-- 작성방식: [모드] | 소스: [MCP명/웹서치] | 🟢X·🟡X·🔴X | 크로스체크: [완료/부분/미완료] -->
```

---

## 데이터 소스 우선순위 (MCP 호출 순서)

MCP 실패 시 → 웹서치로 대체하되 🟡 또는 🔴 태그로 강등한다.
섹션 헤더 주석의 크로스체크를 "미완료"로 기재한다.

### 1단계 — 시장 데이터 → 노드 F 입력
- 🟢 **CoinGecko MCP** — 현재가, 시총, ATH/ATL, 365일 히스토리
- 🟢 **Yahoo Finance MCP** — 상장사 실적·섹터 밸류에이션

### 2단계 — 온체인 데이터 → 노드 D 입력
- 🟢 **Dune Analytics MCP** — 번 히스토리, 트랜잭션량, 홀더 분포
- 🟢 **Etherscan MCP** — 컨트랙트 검증, 대형 지갑, 거래소 유입/유출
- 🟢 **CoinMetrics MCP** — 활성 주소수, Realized Cap, NVT ratio
- 🟢 **Blockchain.com MCP** — BTC/ETH 거시 온체인 지표

### 3단계 — DeFi/프로토콜 수익 → 노드 C 입력
- 🟢 **DefiLlama MCP** — TVL, fees, revenue
  - ⚠️ DePIN 프로젝트 미등재 → 400 에러 시 Messari 웹서치(🟡)로 대체
- 🟡 Token Terminal·Messari — 수익·멀티플 히스토리

### 4단계 — 개발 활동 → 노드 E 입력
- 🟢 **GitHub MCP** — 커밋 빈도, 기여자 수, 이슈 활동

### 5단계 — 거시경제 → Module MACRO 입력
- 🟢 **FRED MCP** — Fed 금리(DFF), M2(M2SL), 실업률(UNRATE)

### 6단계 — 기업 공시 (해당 시만)
- 🟢 **SEC-EDGAR MCP** — 미국 상장사 공시
- 🟢 **DART MCP** — 한국 상장사 공시

### 7단계 — 보완 소스
- 🟢 공식 Foundation 발표, Whitepaper, 거버넌스 투표
- 🟡 Nansen, TokenMetrics — 참고용, 단독 논거 사용 금지
- 🔴 단일 소스 가격 예측 — 인용 최소화

---

## 검증 모드 절차

`검증해줘` 또는 `크로스체크해줘` 명령 시:

1. 리포트 내 모든 수치 목록화
2. 각 수치의 원 소스 확인 → 🟢🟡🔴⚫ 부착
3. 핵심 수치(현재가·TVL·Revenue·스테이킹 비율) 독립 소스 2개 교차 확인
   → 수렴 시 🟡 → 🟢 업그레이드 가능
   → 불일치 시 범위로 표기: `$X ~ $Y (소스 A vs 소스 B)`
4. 결론 문장에 🄰🄴🅄● 부착
5. 섹션 헤더에 작성방식 주석 추가
6. Appendix C에 미검증 목록 생성
7. 검증 결과 요약 출력:
   `🟢 X개 / 🟡 X개 / 🔴 X개 / ⚫ X개 — 전체 신뢰도: [High/Medium/Low]`

---

## 공통 스타일 규칙

- **톤**: 글로벌 IB 리서치 — 단정·팩트·조건부 표현
- **결론 형식**: "가정 X일 때 Y이다" — 조건 없는 단정 금지
- **섹션 완성 기준**: 결론 문장 + Layer 2 태그로 끝나야 한다
- **강세 편향 방지**: 노드 G(리스크)는 Bear 시나리오부터 시작
- **삭제**: 메타 질문 ("~에 대해 알아보겠습니다" 류)
- **섹션 생략 투명성**: 생략된 모듈은 Appendix에 "생략 이유"를 기재한다

---

## Notion 저장 규칙 (풀스택 모드)

- **저장 DB**: ee345e95 / datasource: 87e543c4-6d02-4d9f-81b4-d420e693004b
- **분석 날짜**: 실제 작성일 기준
- **다음 업데이트**: 코인 → 2주 후 / 기업 → 다음 분기 / 매크로 → 1개월 후
- **저장 내용**: 리포트 전문 + Appendix A(신뢰도 로그) + 검증 트리 확정 내용
- **기존 분석 확인**: 동일 대상 기존 분석 존재 시 Delta 표기 후 저장
- **저장 후 링크 반환**: 완료 시 Notion 페이지 URL 제공

---

## GitHub 저장 규칙 (풀스택 모드 — 반자동)

### 저장 대상
풀스택 분석 완료 후 사용자가 "저장해줘" 또는 확인 응답 시 실행한다.
자동 실행하지 않는다 — 반드시 사용자 확인 후 커밋한다.

### 저장 위치
- **레포**: {GitHub 레포명 — 사용자 설정 필요}
- **오너**: {GitHub 사용자명 — 사용자 설정 필요}
- **브랜치**: main
- **파일 경로 규칙**:
  - 크립토: `reports/crypto/YYYY-MM-DD-{TICKER}.md`
  - 기업: `reports/equity/YYYY-MM-DD-{TICKER}.md`

### 커밋 메시지 규칙
```
feat(research): {TICKER} IB분석 {YYYY-MM-DD}

Q1: {집계 태그} ({서브 질문 1줄 요약})
Q2: {집계 태그} ({서브 질문 1줄 요약})
투자 의견: {Overweight|Neutral|Underweight}
목표가(Base): {가격}
Notion: {Notion 페이지 URL}
```

### 저장 내용
- 리포트 전문 (Section 0~7 + Appendix)
- YAML 프론트매터 추가:
```yaml
---
ticker: {TICKER}
date: {YYYY-MM-DD}
type: {crypto|equity}
opinion: {Overweight|Neutral|Underweight}
q1: {태그}
q2: {태그}
target_base: {가격}
notion_url: {URL}
---
```

### 저장 후 출력
```
✅ 저장 완료
- Notion: {URL}
- GitHub: https://github.com/{owner}/{repo}/blob/main/{파일경로}
```
